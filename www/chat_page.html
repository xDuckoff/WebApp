<html>
	<head>
		<title>SUPER CRAZY NAME</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<link rel="stylesheet" href="{{ url_for('static/css', filename='bootstrap.min.css') }}">
		<script src="{{ url_for('static', filename='js/jquery.min.js') }}" type="text/javascript"></script>


		<!-- CODEMIRROR -->
		<script src="{{ url_for('static', filename='js/codemirror/lib/codemirror.js') }}"></script>
		<link rel="stylesheet" href="{{ url_for('static', filename='js/codemirror/lib/codemirror.css') }}">
		<script src="{{ url_for('static', filename='js/codemirror/mode/javascript/javascript.js') }}"></script>
		<script src="{{ url_for('static', filename='js/codemirror/mode/python/python.js') }}"></script>

		<script type="text/javascript">
			function add_message(author, message) {
				var text =  '<div class="well well-sm" style="word-wrap: break-word;">' +"<b>" + author + '</b><br>'+ message + "</div>";
				$("#chat-panel").append(text);
			}

			function get_scrollHeight(element) {
				var pr = element.scrollTop();
				element.scrollTop(element.get(0).scrollHeight);
				var res = element.scrollTop();
				element.scrollTop(pr);
				return res;
			}

			$(function () {
				$("#send-btn").click(function() {
					var t = false;
					if (get_scrollHeight($('#chat-panel')) == $('#chat-panel').scrollTop())
						t = true;
	  				add_message("TEst_Name", $("#message-input").val());
	  				$("#message-input").val('');
	  				if (t)
	  					$('#chat-panel').scrollTop($('#chat-panel').get(0).scrollHeight);    
				});
				$("#message-input").keypress(function(e) {
				    if(e.which == 13) {
				        $("#send-btn").click();
				    }
				});

				$('#code-editor').val("print('Hello World!')");
				var editor = CodeMirror.fromTextArea($('#code-editor').get(0), {
			        mode: {name: "python",
			               version: 2,
			               singleLineStringErrors: false},
			        lineNumbers: true,
			        indentUnit: 4,
			        matchBrackets: true,
			        value: "print('Hello World!')"
			    });

				// var myCodeMirror = CodeMirror($('#column').get(0), {
				//   value: "print('Hello world!')\n",
				//   mode:  "python"
				// }); 

			});
		</script>

	</head>
	<body ><!--style ="background-color: #2ba6cb;"-->
		<div class="container-fluid">
			<div class="row">
				<center>
					NAME OF THIS SUPER CHAT
				</center>
			</div>
			<div class="row">
				<div class="col-md-6">
					<div class="panel panel-default">
						<div class="panel-body" id="chat-panel" style="min-height: 500; max-height: 500;overflow-y: scroll;">
							<b>Author</b> <br>
							<div class="well well-sm" style="word-wrap: break-word;">
								Text
							</div>
						</div>
					</div>
					
					<!-- <div class="panel panel-default">
						<div class="panel-body"> -->
							<label for="message-input" class="sr-only">Message</label>
							<div class="row">
								<div class="col-sm-10" >
			    					<input type="text" class="form-control" id="message-input" placeholder="Write here">
		    					</div>
		    					<div class="col-sm-2" style="padding-left: 0;">
									<button type="submit" class="btn btn-default btn-block" id="send-btn">Send</button>
								</div>
							</div>
					<!--	</div>
					</div> -->
				</div>
				<div class="col-md-6" id="column">
					<textarea class="form-control" id="code-editor" rows="3" style="resize: vertical; "></textarea>
				</div>
			</div>
		</div>
	</body>
</html>